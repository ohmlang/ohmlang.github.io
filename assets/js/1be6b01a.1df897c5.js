"use strict";(self.webpackChunkohmjs_org=self.webpackChunkohmjs_org||[]).push([[377],{3905:function(e,t,r){r.d(t,{Zo:function(){return m},kt:function(){return h}});var n=r(7294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var s=n.createContext({}),c=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},m=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,m=p(e,["components","mdxType","originalType","parentName"]),u=c(r),h=i,f=u["".concat(s,".").concat(h)]||u[h]||l[h]||a;return r?n.createElement(f,o(o({ref:t},m),{},{components:r})):n.createElement(f,o({ref:t},m))}));function h(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=r.length,o=new Array(a);o[0]=u;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p.mdxType="string"==typeof e?e:i,o[1]=p;for(var c=2;c<a;c++)o[c]=r[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}u.displayName="MDXCreateElement"},7760:function(e,t,r){r.r(t),r.d(t,{assets:function(){return m},contentTitle:function(){return s},default:function(){return h},frontMatter:function(){return p},metadata:function(){return c},toc:function(){return l}});var n=r(3117),i=r(102),a=(r(7294),r(3905)),o=["components"],p={},s="Using Ohm with TypeScript",c={unversionedId:"typescript",id:"typescript",title:"Using Ohm with TypeScript",description:'Out of the box, Ohm mostly "just works" with TypeScript. The the built-in type definitions cover the core API, though some less frequently used parts are not (yet) there. If you notice something that\'s missing, please feel free to open an issue or submit a PR.',source:"@site/docs/typescript.md",sourceDirName:".",slug:"/typescript",permalink:"/docs/typescript",editUrl:"https://github.com/harc/ohm/edit/master/doc/typescript.md",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"Ohm Errors",permalink:"/docs/errors"},next:{title:"Publishing Grammars",permalink:"/docs/publishing-grammars"}},m={},l=[{value:"Grammar-specific type definitions",id:"grammar-specific-type-definitions",level:2}],u={toc:l};function h(e){var t=e.components,r=(0,i.Z)(e,o);return(0,a.kt)("wrapper",(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"using-ohm-with-typescript"},"Using Ohm with TypeScript"),(0,a.kt)("p",null,'Out of the box, Ohm mostly "just works" with TypeScript. The the built-in type definitions cover the core API, though some less frequently used parts are not (yet) there. If you notice something that\'s missing, please feel free to ',(0,a.kt)("a",{parentName:"p",href:"https://github.com/harc/ohm/issues/new"},"open an issue")," or submit a PR."),(0,a.kt)("p",null,"You can see some projects that are using Ohm with TypeScript ",(0,a.kt)("a",{parentName:"p",href:"https://sourcegraph.com/search?q=context:global+ohm-js+lang:TypeScript+-repo:%5Egithub%5C.com/harc/ohm%24+select:repo+&patternType=literal"},"on Sourcegraph"),"."),(0,a.kt)("h2",{id:"grammar-specific-type-definitions"},"Grammar-specific type definitions"),(0,a.kt)("p",null,"As of Ohm v16, it's also possible to generate type definitions that are specific to your grammar. The main advantages of this are:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"the TypeScript compiler can check that your semantic actions have the correct number of arguments and a consistent return type."),(0,a.kt)("li",{parentName:"ul"},"IDEs such as ",(0,a.kt)("a",{parentName:"li",href:"https://code.visualstudio.com/"},"VS Code")," can autocomplete action names, show tooltips with argument types (",(0,a.kt)("inlineCode",{parentName:"li"},"IterationNode"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"NonterminalNode"),", or ",(0,a.kt)("inlineCode",{parentName:"li"},"TerminalNode"),"), etc.")),(0,a.kt)("p",null,"To enable grammar-specific type definitions:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Install the ",(0,a.kt)("inlineCode",{parentName:"p"},"@ohm-js/cli")," package (e.g., ",(0,a.kt)("inlineCode",{parentName:"p"},"npm install -D @ohm-js/cli")," to add it as a dev dependency).")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Put your grammar in a separate .ohm file, if it isn't already.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Use the Ohm CLI to generate a bundle (.ohm-bundle.js) for your grammar, along with the associated type definitions (.d.ts). For example, if your grammar is in ",(0,a.kt)("inlineCode",{parentName:"p"},"src/my-grammar.ohm"),":"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"npx ohm generateBundles --withTypes src\n")),(0,a.kt)("p",{parentName:"li"},"...will create ",(0,a.kt)("inlineCode",{parentName:"p"},"src/my-grammar.ohm-bundle.js")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"src/my-grammar.ohm-bundle.d.ts"),". You can directly import the bundle like this:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"import grammar from './my-grammar.ohm-bundle'\n")),(0,a.kt)("p",{parentName:"li"},"For more information, see the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/harc/ohm/blob/master/examples/typescript/src/arithmetic.ts"},"Ohm TypeScript example"),"."))))}h.isMDXComponent=!0}}]);