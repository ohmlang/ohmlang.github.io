<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<script defer="defer" src="https://thirteen-six.ohmjs.org/script.js" spa="auto" site="KJSMJZEV"></script><title data-react-helmet="true">Syntax Reference | Ohm</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://ohmjs.org/docs/syntax-reference"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Syntax Reference | Ohm"><meta data-react-helmet="true" name="description" content="This document describes the syntax of the Ohm language, which is a variant of parsing expression grammars (PEGs). If you have experience with PEGs, the Ohm syntax will mostly look familiar, but there are a few important differences to note:"><meta data-react-helmet="true" property="og:description" content="This document describes the syntax of the Ohm language, which is a variant of parsing expression grammars (PEGs). If you have experience with PEGs, the Ohm syntax will mostly look familiar, but there are a few important differences to note:"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ohmjs.org/docs/syntax-reference"><link data-react-helmet="true" rel="alternate" href="https://ohmjs.org/docs/syntax-reference" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://ohmjs.org/docs/syntax-reference" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.95e01481.css">
<link rel="preload" href="/assets/js/runtime~main.0508954c.js" as="script">
<link rel="preload" href="/assets/js/main.0128f73c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/ohmjs-logo.svg" alt="Ohm logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/ohmjs-logo.svg" alt="Ohm logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Ohm</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a href="/editor" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Editor</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/harc/ohm" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://twitter.com/_ohmjs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-twitter-link" aria-label="@_ohmjs on Twitter"></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://nextjournal.com/dubroy/ohm-parsing-made-easy" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Tutorial<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active menuLinkText_QVir" aria-current="page">Reference</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/syntax-reference">Syntax reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference">API reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extras">Extras</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/errors">Errors</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/typescript">Using with TypeScript</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/publishing-grammars">Publishing grammars</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contributor-guide">Contributing</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Release notes</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/releases/ohm-js-16.0">v16.0.0</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/patterns-and-pitfalls">Patterns and pitfalls</a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Syntax Reference</h1><p>This document describes the syntax of the <em>Ohm language</em>, which is a variant of parsing expression grammars (PEGs). If you have experience with PEGs, the Ohm syntax will mostly look familiar, but there are a few important differences to note:</p><ul><li>When naming rules, <strong>case matters</strong>: whitespace is implicitly skipped inside a rule application if the rule name begins with an uppercase letter. For further information, see <a href="#syntactic-lexical">Syntactic vs. Lexical Rules</a>.</li><li>Grammars are purely about recognition: they do not contain semantic actions (those are defined separately) or bindings. The separation of semantic actions is one of the defining features of Ohm -- we believe that it improves modularity and makes both grammars and semantics easier to understand.</li><li>Alternation expressions support <em>case names</em>, which are used in <a href="#inline-rules">inline rule declarations</a>. This makes semantic actions for alternation expressions simpler and less error-prone.</li><li>Ohm does not (yet) support semantic predicates.</li></ul><p>Ohm is closely related to <a href="http://tinlizzie.org/ometa/" target="_blank" rel="noopener noreferrer">OMeta</a>, another PEG-based language for parsing and pattern matching. Like OMeta, Ohm supports a few features not supported by many PEG parsing frameworks:</p><ul><li><a href="#rule-application">Rule applications</a> can accept parameters. This makes it possible to write higher-order rules, such as the built-in <code>ListOf</code> rule.</li><li>Grammars can be extended in an object-oriented way -- see <a href="#defining-extending-and-overriding-rules">Defining, Extending, and Overriding Rules</a>.</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="terminology">Terminology<a class="hash-link" href="#terminology" title="Direct link to heading">â€‹</a></h2><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Arithmetic {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Expr = &quot;1 + 1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This is a grammar named &quot;Arithmetic&quot;, which has a single rule named &quot;Expr&quot;. The right hand side of <em>Expr</em> is known as a &quot;rule body&quot;. A rule body may be any valid <em>parsing expression</em>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="parsing-expressions">Parsing Expressions<a class="hash-link" href="#parsing-expressions" title="Direct link to heading">â€‹</a></h2><p>Here is a full list of the different kinds of parsing expressions supported by Ohm:</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="terminals">Terminals<a class="hash-link" href="#terminals" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;hello there&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Matches exactly the characters contained inside the quotation marks.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="special-characters">Special characters<a class="hash-link" href="#special-characters" title="Direct link to heading">â€‹</a></h4><p>Special characters (<code>&quot;</code>, <code>\</code>, and <code>&#x27;</code>) can be escaped with a backslash â€” e.g., <code>&quot;\&quot;&quot;</code> will match a literal quote character in the input stream. Other valid escape sequences include: <code>\b</code> (backspace), <code>\f</code> (form feed), <code>\n</code> (line feed), <code>\r</code> (carriage return), and <code>\t</code> (tab), as well as <code>\x</code> followed by 2 hex digits and <code>\u</code> followed by 4 hex digits, for matching characters by code point.</p><p>The <pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA">\u{<i>hexDigits</i>}</code></pre> escape sequence can be used to represent <em>any</em> Unicode code point, including code points above <code>0xFFFF</code>. E.g., <code>&quot;\u{1F639}&quot;</code> will match <code>&#x27;ðŸ˜¹&#x27;</code>. (<em>New in Ohm v16.3.0.</em>)</p><p><strong>NOTE:</strong> For grammars defined in a JavaScript string literal (i.e., not in a separate .ohm file), it&#x27;s recommended to use a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/raw" target="_blank" rel="noopener noreferrer">template literal with the String.raw tag</a>. Without <code>String.raw</code>, you&#x27;ll need to use double-escaping â€” e.g., <code>\\n</code> rather than <code>\n</code>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="terminal-range">Terminal Range<a class="hash-link" href="#terminal-range" title="Direct link to heading">â€‹</a></h3><pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><i>start</i>..<i>end</i></code></pre><p>Matches exactly one code point whose value is between <em>start</em> and <em>end</em> (inclusive). E.g., <code>&quot;a&quot;..&quot;c&quot;</code> will match <code>&#x27;a&#x27;</code>, <code>&#x27;b&#x27;</code>, or <code>&#x27;c&#x27;</code>. Note: <em>start</em> and <em>end</em> must be <a href="#terminals">Terminal</a> expressions containing a single character or code point. (<em>Note:</em> Prior to Ohm v16.3.0, terminal ranges only supported code points up <code>0xFFFF</code>. As of v16.3.0, higher code points can be specified directly (e.g. <code>&quot;ðŸ˜‡&quot;..&quot;ðŸ˜ˆ&quot;</code>) or with an escape code (<code>&quot;\u{1F607}&quot;..&quot;\u{1F608}&quot;</code>).</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="rule-application">Rule Application<a class="hash-link" href="#rule-application" title="Direct link to heading">â€‹</a></h3><pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><i>ruleName</i></code></pre><p>Matches the body of the rule named <em>ruleName</em>. For example, the built-in rule <code>letter</code> will parse a string of length 1 that is a letter.</p><pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><i>ruleName</i>&lt;<i>expr</i>&gt;</code></pre><p>Matches the body of the <em>parameterized rule</em> named <em>ruleName</em>, substituting the parsing expression <em>expr</em> as its first parameter. For parameterized rules with more than one parameter, the parameters are comma-separated, e.g. <code>ListOf&lt;field, &quot;;&quot;&gt;</code>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="repetition-operators---">Repetition operators: <!-- -->*<!-- -->, +, ?<a class="hash-link" href="#repetition-operators---" title="Direct link to heading">â€‹</a></h3><pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><i>expr</i> *</code></pre><p>Matches the expression <em>expr</em> repeated 0 or more times. E.g., <code>&quot;a&quot;*</code> will match <code>&#x27;&#x27;</code>, <code>&#x27;a&#x27;</code>, <code>&#x27;aa&#x27;</code>, ...</p><p>Inside a <em>syntactic rule</em> -- any rule whose name begins with an upper-case letter -- spaces before a match are automatically skipped. E.g., <code>&quot;a&quot;*</code> will match <code>&quot; a a&quot;</code> as well as <code>&quot;aa&quot;</code>. See the documentation on <a href="#syntactic-lexical">syntactic and lexical rules</a> for more information.</p><pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><i>expr</i> +</code></pre><p>Matches the expression <em>expr</em> repeated 1 or more times. E.g., <code>letter+</code> will match <code>&#x27;x&#x27;</code>, <code>&#x27;xA&#x27;</code>, ...</p><p>As with the <code>*</code> operator, spaces are skipped when used in a <a href="#syntactic-lexical">syntactic rule</a>.</p><pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><i>expr</i> ?</code></pre><p>Tries to match the expression <em>expr</em>, succeeding whether it matches or not. No input is consumed if it does not match.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="sequence">Sequence<a class="hash-link" href="#sequence" title="Direct link to heading">â€‹</a></h3><pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><i>expr1</i> <i>expr2</i></code></pre><p>Matches the expression <code>expr1</code> followed by <code>expr2</code>. E.g., <code>&quot;grade&quot; letter</code> will match <code>&#x27;gradeA&#x27;</code>, <code>&#x27;gradeB&#x27;</code>, ...</p><p>As with the <code>*</code> and <code>+</code> operators, spaces are skipped when used in a <a href="#syntactic-lexical">syntactic rule</a>. E.g., <code>&quot;grade&quot; letter</code> will match <code>&#x27; grade A&#x27;</code> as well as <code>&#x27;gradeA&#x27;</code>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="alternation">Alternation<a class="hash-link" href="#alternation" title="Direct link to heading">â€‹</a></h3><pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><i>expr1</i> | <i>expr2</i></code></pre><p>Matches the expression <code>expr1</code>, and if that does not succeed, matches the expression <code>expr2</code>. E.g., <code>letter | digit</code> will match <code>&#x27;a&#x27;</code>, <code>&#x27;9&#x27;</code>, ...</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="lookahead-">Lookahead: &amp;<a class="hash-link" href="#lookahead-" title="Direct link to heading">â€‹</a></h3><pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA">&amp; <i>expr</i></code></pre><p>Succeeds if the expression <code>expr</code> can be matched, but does not consume anything from the input stream. Usually used as part of a sequence, e.g. <code>letter &amp;digit</code> will match <code>&#x27;a9&#x27;</code>, but only consume &#x27;a&#x27;. <code>&amp;&quot;a&quot; letter+</code> will match any string of letters that begins with &#x27;a&#x27;.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="negative-lookahead-">Negative Lookahead: ~<a class="hash-link" href="#negative-lookahead-" title="Direct link to heading">â€‹</a></h3><pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA">~ <i>expr</i></code></pre><p>Succeeds if the expression <code>expr</code> cannot be matched, and does not consume anything from the input stream. Usually used as part of a sequence, e.g., <code>~&quot;\n&quot; any</code> will consume any single character that is not a new line character.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="lexification-">Lexification: <span>#</span><a class="hash-link" href="#lexification-" title="Direct link to heading">â€‹</a></h3><pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"># <i>expr</i></code></pre><p>Matches <em>expr</em> as if in a lexical context. This can be used to prevent whitespace skipping before an expression that appears in the body of a syntactic rule. For further information, see <a href="#syntactic-lexical">Syntactic vs. Lexical Rules</a>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="comment">Comment<a class="hash-link" href="#comment" title="Direct link to heading">â€‹</a></h3><p>Inside an Ohm grammar, you can use both single-line (<code>//</code>) comments like</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">booleanLiteral = (&quot;true&quot; | &quot;false&quot;) // TODO: Should we support &quot;True&quot;/&quot;False&quot; as well?</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>or</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">// For semantics on how decimal literals are constructed, see section 7.8.3</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>as well as multiline (<code>/* */</code>) comments like:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Note: Punctuator and DivPunctuator (see https://es5.github.io/x7.html#x7.7) are</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  not currently used by this grammar.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*/</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="built-in-rules">Built-in Rules<a class="hash-link" href="#built-in-rules" title="Direct link to heading">â€‹</a></h2><p>(See <a href="https://github.com/harc/ohm/blob/master/packages/ohm-js/src/built-in-rules.ohm" target="_blank" rel="noopener noreferrer">built-in-rules.ohm</a>.)</p><p><code>any</code>: Matches the next character in the input stream, if one exists.</p><p><code>letter</code>: Matches a single character which is a letter (either uppercase or lowercase).</p><p><code>lower</code>: Matches a single lowercase letter.</p><p><code>upper</code>: Matches a single uppercase letter.</p><p><code>digit</code>: Matches a single character which is a digit from 0 to 9.</p><p><code>hexDigit</code>: Matches a single character which is a either digit or a letter from A-F.</p><p><code>alnum</code>: Matches a single letter or digit; equivalent to <code>letter | digit</code>.</p><p><code>space</code>: Matches a single whitespace character (e.g., space, tab, newline, etc.)</p><p><code>end</code>: Matches the end of the input stream. Equivalent to <code>~any</code>.</p><pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA">caseInsensitive&lt;<i>terminal</i>&gt;</code></pre>: Matches _terminal_, but ignoring any differences in casing (based on the simple, single-character Unicode case mappings). E.g., `caseInsensitive<!-- -->&lt;<!-- -->&quot;ohm&quot;<!-- -->&gt;<!-- -->` will match `&#x27;Ohm&#x27;`, `&#x27;OHM&#x27;`, etc.<pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA">ListOf&lt;<i>elem</i>, <i>sep</i>&gt;</code></pre>: Matches the expression _elem_ zero or more times, separated by something that matches the expression _sep_. E.g., `ListOf<!-- -->&lt;<!-- -->letter, &quot;,&quot;<!-- -->&gt;<!-- -->` will match `&#x27;&#x27;`, `&#x27;a&#x27;`, and `&#x27;a, b, c&#x27;`.<pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA">NonemptyListOf&lt;<i>elem</i>, <i>sep</i>&gt;</code></pre>: Like `ListOf`, but matches _elem_ at least one time.<pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA">listOf&lt;<i>elem</i>, <i>sep</i>&gt;</code></pre>: Similar to `ListOf<!-- -->&lt;<!-- -->elem, sep<!-- -->&gt;<!-- -->` but interpreted as [lexical rule](#syntactic-lexical).<pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA">applySyntactic&lt;<i>ruleName</i>&gt;</code></pre>: Allows the syntactic rule _ruleName_ to be applied in a lexical context, which is otherwise not allowed. Spaces are skipped _before_ and _after_ the rule application. _New in Ohm v16.1.0._<h2 class="anchor anchorWithStickyNavbar_mojV" id="grammar-syntax">Grammar Syntax<a class="hash-link" href="#grammar-syntax" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="grammar-inheritance">Grammar Inheritance<a class="hash-link" href="#grammar-inheritance" title="Direct link to heading">â€‹</a></h3><pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><i>grammarName</i> &lt;: <i>supergrammarName</i> <!-- -->{<!-- --> ... <!-- -->}</code></pre><p>Declares a grammar named <code>grammarName</code> which inherits from <code>supergrammarName</code>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="defining-extending-and-overriding-rules">Defining, Extending, and Overriding Rules<a class="hash-link" href="#defining-extending-and-overriding-rules" title="Direct link to heading">â€‹</a></h3><p>In the three forms below, the rule body may optionally begin with a <code>|</code> character, which will be
ignored. Also note that in rule names, <a href="#syntactic-lexical"><strong>case is significant</strong></a>.</p><pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><i>ruleName</i> = <i>expr</i></code></pre><p>Defines a new rule named <code>ruleName</code> in the grammar, with the parsing expression <code>expr</code> as the rule body. Throws an error if a rule with that name already exists in the grammar or one of its supergrammars.</p><pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><i>ruleName</i> := <i>expr</i></code></pre><p>Defines a rule named <code>ruleName</code>, overriding a rule of the same name in a supergrammar. Throws an error if no rule with that name exists in a supergrammar.</p><p><strong>New in 15.3.0:</strong> The <em>super-splice</em> operator (<code>...</code>) can be used to append and/or prepend cases to the supergrammar rule body. E.g., if the supergrammar defines <code>comment = multiLineComment</code>, then <code>comment := ... | singleLineComment</code> is equivalent to <code>comment := multiLineComment | singleLineComment</code>.</p><pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><i>ruleName</i> += <i>expr</i></code></pre><p>Extends a supergrammar rule named <code>ruleName</code>, throwing an error if no rule with that name exists in a supergrammar. The rule body will effectively be <pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><i>expr</i> | <i>oldBody</i></code></pre>, where <code>oldBody</code> is the rule body as defined in the supergrammar.</p><p>Note that as of v15.3.0, the super-splice operator (<code>...</code>) offers a more general form of rule extension. E.g., <code>keyword += &quot;def&quot;</code> can also be written <code>keyword := &quot;def&quot; | ...</code>.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="parameterized-rules">Parameterized Rules<a class="hash-link" href="#parameterized-rules" title="Direct link to heading">â€‹</a></h4><pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><i>ruleName</i>&lt;<i>arg1</i>, ..., <i>argN</i>&gt; = <i>expr</i></code></pre><p>Defines a new rule named <code>ruleName</code> which has <em>n</em> parameters. In the rule body <em>expr</em>, the parameter names (e.g. <em>arg1</em>) may be used as rule applications. E.g., <code>Repeat&lt;x&gt; = x x</code>.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="rule-descriptions">Rule Descriptions<a class="hash-link" href="#rule-descriptions" title="Direct link to heading">â€‹</a></h4><p>Rule declarations may optionally have a description, which is a parenthesized &quot;comment&quot; following the name of the rule in its declaration. Rule descriptions are used to produce better error messages for end users of a language when input is not recognized. For example:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">ident (an identifier)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  = ~keyword name</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="inline-rule-declarations">Inline Rule Declarations<a class="hash-link" href="#inline-rule-declarations" title="Direct link to heading">â€‹</a></h4><pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT theme-code-block" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><i>expr</i> -- <i>caseName</i></code></pre><p>When a parsing expression is followed by the characters <code>--</code> and a name, it signals an <em>inline rule declaration</em>. This is most commonly used in alternation expressions to ensure that each branch has the same arity. For example, the following declaration:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">AddExp = AddExp &quot;+&quot; MulExp  -- plus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       | MulExp</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>is equivalent to:</p><div class="codeBlockContainer_I0IT language-ohm theme-code-block"><div class="codeBlockContent_wNvx ohm"><pre tabindex="0" class="prism-code language-ohm codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">AddExp = AddExp_plus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       | MulExp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AddExp_plus = AddExp &quot;+&quot; MulExp</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="syntactic-lexical">Syntactic vs. Lexical Rules<a class="hash-link" href="#syntactic-lexical" title="Direct link to heading">â€‹</a></h3><p>A <em>syntactic rule</em> is a rule whose name begins with an uppercase letter, and <em>lexical rule</em> is one whose name begins with a lowercase letter. The difference between lexical and syntactic rules is that syntactic rules implicitly skip whitespace characters.</p><p>The definition of &quot;whitespace character&quot; is anything that matches the grammar&#x27;s <code>space</code> rule. The default implementation of <code>space</code> matches &#x27; &#x27;, &#x27;\t&#x27;, &#x27;\n&#x27;, &#x27;\r&#x27;, and any other character that is considered whitespace in the <a href="http://ecma-international.org/ecma-262/5.1/#sec-7.2" target="_blank" rel="noopener noreferrer">ES5 spec</a>.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="how-space-skipping-works">How space skipping works<a class="hash-link" href="#how-space-skipping-works" title="Direct link to heading">â€‹</a></h4><p>In the body of a syntactic rule, Ohm implicity inserts applications of the <code>spaces</code> rule before each expression. (The <code>spaces</code> rule is defined as <code>spaces = space*</code>.) As an example, take this fragment of JSON grammar:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Array = &quot;[&quot; &quot;]&quot;  -- empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      | &quot;[&quot; Elements &quot;]&quot;  -- nonEmpty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Elements = Element (&quot;,&quot; Element)*</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p><code>Array</code> and <code>Elements</code> are both synactic rules, since their names begin with a capital letter. Here&#x27;s what a lexical version of these rule would look like, with <em>explicit</em> space skipping:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">array = spaces &quot;[&quot; spaces &quot;]&quot;  -- empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      | spaces &quot;[&quot; spaces elements spaces &quot;]&quot;  -- nonEmpty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">elements = spaces element (spaces &quot;,&quot; spaces element)*</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>In terms of the language it accepts, this version of the rules â€” with explicit space skipping â€” is equivalent to the syntactic version above.</p><p>A few other details that are helpful to know:</p><ol><li>If the start rule is a syntactic rule, both leading and trailing spaces are skipped around the top-level application.</li><li>When the body of a rule contains a <a href="#repetition-operators---">repetition operator</a> (e.g. <code>+</code> or <code>*</code>), spaces are skipped before each match. In other words, <code>Names = name+</code> is equivalent to <code>names = (spaces name)+</code>.</li><li>The <a href="#lexification-">lexification operator (<code>#</code>)</a> can be used in the body of a syntactic rule to prevent space skipping in specific places. For example:</li></ol><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">KeyAndValue = #(letter alnum+) &quot;:&quot; #(digit+)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>is equivalent to:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">keyAndValue = letter alnum+ spaces &quot;:&quot; digit+</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Note that no space skipping occurs <em>inside</em> or <em>before</em> the lexical context defined by the <code>#</code> character. That means that this rule will match <code>&#x27;count :33&#x27;</code>, but <em>not</em> <code>&#x27;count: 33&#x27;</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/harc/ohm/edit/master/doc/syntax-reference.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/api-reference"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">API Reference</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#terminology" class="table-of-contents__link toc-highlight">Terminology</a></li><li><a href="#parsing-expressions" class="table-of-contents__link toc-highlight">Parsing Expressions</a><ul><li><a href="#terminals" class="table-of-contents__link toc-highlight">Terminals</a></li><li><a href="#terminal-range" class="table-of-contents__link toc-highlight">Terminal Range</a></li><li><a href="#rule-application" class="table-of-contents__link toc-highlight">Rule Application</a></li><li><a href="#repetition-operators---" class="table-of-contents__link toc-highlight">Repetition operators: *, +, ?</a></li><li><a href="#sequence" class="table-of-contents__link toc-highlight">Sequence</a></li><li><a href="#alternation" class="table-of-contents__link toc-highlight">Alternation</a></li><li><a href="#lookahead-" class="table-of-contents__link toc-highlight">Lookahead: &amp;</a></li><li><a href="#negative-lookahead-" class="table-of-contents__link toc-highlight">Negative Lookahead: ~</a></li><li><a href="#lexification-" class="table-of-contents__link toc-highlight">Lexification: <span>#</span></a></li><li><a href="#comment" class="table-of-contents__link toc-highlight">Comment</a></li></ul></li><li><a href="#built-in-rules" class="table-of-contents__link toc-highlight">Built-in Rules</a></li><li><a href="#grammar-syntax" class="table-of-contents__link toc-highlight">Grammar Syntax</a><ul><li><a href="#grammar-inheritance" class="table-of-contents__link toc-highlight">Grammar Inheritance</a></li><li><a href="#defining-extending-and-overriding-rules" class="table-of-contents__link toc-highlight">Defining, Extending, and Overriding Rules</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items"><li class="footer__item"><a href="https://nextjournal.com/dubroy/ohm-parsing-made-easy" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Tutorial<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/KwxY5gegRQ" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/harc/ohm/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/harc/ohm" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/_ohmjs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2014â€“2022 Alessandro Warth, Patrick Dubroy, and the Ohm project contributors. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.0508954c.js"></script>
<script src="/assets/js/main.0128f73c.js"></script>
</body>
</html>